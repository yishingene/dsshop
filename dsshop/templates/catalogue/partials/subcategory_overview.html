{% load category_tags i18n %}

{% category_tree as tree_categories %}
<div class="widget widget_product_categories">
{% if category.get_depth == 1 %}
    <h4 class="widget-title">{{ category.name }}</h4>
{% elif category.get_depth == 2 %}
	<h4 class="widget-title">{{ category.get_parent }}</h4>
{% endif %}
    <h6 class="subcategory">{% trans 'SubcategorieÃ«n' %}</h6>
    <ul class="product-categories">
{% if tree_categories %}
    {% get_current_language as LANGUAGE_CODE %}
    {% for tree_cat, info in tree_categories %}
    	{% if info.level == 1 and category.get_depth == 1 and tree_cat.get_parent == category %}
        <li>
            {% if LANGUAGE_CODE == 'nl' %}
            <a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_nl }}</a>
            {% elif LANGUAGE_CODE == 'fr' %}
            <a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_fr }}</a>
            {% endif %}
        </li>
        {% elif info.level == 1 and category.get_depth == 2 and tree_cat.get_parent == category.get_parent %}
        <li>
    	{% if category == tree_cat %}
            {% if LANGUAGE_CODE == 'nl' %}
    		<strong><u><a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_nl }}</a></u></strong>
            {% elif LANGUAGE_CODE == 'fr' %}
            <strong><u><a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_fr }}</a></u></strong>
            {% endif %}
    	{% else %}
            {% if LANGUAGE_CODE == 'nl' %}
        	<a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_nl }}</a>
            {% elif LANGUAGE_CODE == 'fr' %}
            <a href="{{ tree_cat.get_absolute_url }}">{{ tree_cat.name_fr }}</a>
            {% endif %}
    	{% endif %}
        </li>
        {% endif %}
    {% endfor %}
{% endif %}
    </ul>
</div>
